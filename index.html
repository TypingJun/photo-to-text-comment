<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta property="og:title" content="ì‚¬ì§„ì„ ì¸ìŠ¤íƒ€ ëŒ“ê¸€ìš© ê¸€ìë¡œ">
<meta property="og:description" content="ì‚¬ì§„ í•œ ì¥ â†’ ë³µì‚¬í•´ì„œ ë°”ë¡œ ëŒ“ê¸€">
<meta property="og:type" content="website">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ëŒ“ê¸€ìš© ê¸€ì ë³€í™˜ê¸°</title>

<style>
  body {
    margin: 0;
    padding: 24px;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #ffffff;
    color: #111;
    text-align: center;
    max-width: 420px;
    margin-left: auto;
    margin-right: auto;
  }

  h1 {
    font-size: 22px;
    font-weight: 700;
    line-height: 1.4;
    margin-bottom: 8px;
  }

  .sub {
    font-size: 14px;
    color: #777;
    margin-bottom: 28px;
  }

  .upload {
    display: block;
    padding: 16px;
    background: #000;
    color: #fff;
    border-radius: 12px;
    cursor: pointer;
    font-size: 15px;
    margin-bottom: 28px;
  }

  input[type="file"] {
    display: none;
  }

  .guide {
    font-size: 13px;
    color: #666;
    margin-bottom: 8px;
  }

  pre {
    font-family: Consolas, "D2Coding", "Noto Sans Mono", monospace;
    font-size: 12px;
    line-height: 1;
    white-space: pre;
    background: #f6f6f6;
    padding: 16px;
    border-radius: 12px;
    overflow-x: auto;
    margin-bottom: 12px;
  }

  .copy {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #fff;
    font-size: 14px;
    cursor: pointer;
  }

  .footer {
    margin-top: 40px;
    font-size: 12px;
    color: #aaa;
    line-height: 1.5;
  }
</style>
</head>

<body>

<h1>
ì‚¬ì§„ í•œ ì¥ì„<br>
ì¸ìŠ¤íƒ€ ëŒ“ê¸€ìš© ê¸€ìë¡œ ë°”ê¿”ë³´ì„¸ìš”
</h1>

<div class="sub">
ë³µì‚¬í•´ì„œ ë°”ë¡œ ëŒ“ê¸€ì— ë¶™ì—¬ë„£ê¸°
</div>

<label class="upload">
ì‚¬ì§„ ì˜¬ë¦¬ê¸° (ëŒ“ê¸€ìš©)
<input type="file" id="imageInput" accept="image/*">
</label>

<div class="guide">
ğŸ‘‡ ì•„ë˜ ê²°ê³¼ë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•˜ì„¸ìš”
</div>

<pre id="result">ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤</pre>

<button class="copy" id="copyBtn">
ì „ì²´ ë³µì‚¬
</button>

<div class="footer">
ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
ë¡œê·¸ì¸ë„ í•„ìš” ì—†ìŠµë‹ˆë‹¤.<br>
ê·¸ëƒ¥ ì“°ì„¸ìš”.
</div>

<script>
  const input = document.getElementById("imageInput");
  const result = document.getElementById("result");
  const copyBtn = document.getElementById("copyBtn");

  const COLS = 25;        // ì¸ìŠ¤íƒ€ ëŒ“ê¸€ìš© ê³ ì •
  const THRESHOLD = 128; // ì‹¤ë£¨ì—£ ê¸°ì¤€

  input.addEventListener("change", () => {
    const file = input.files[0];
    if (!file) return;

    const img = new Image();

    img.onload = () => {
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");

      const targetWidth = COLS * 2;
      const scale = targetWidth / img.width;

      canvas.width = targetWidth;
      canvas.height = Math.floor(img.height * scale);

      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

      const data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;

      let asciiArt = "";

      for (let y = 0; y < canvas.height; y += 4) {
        for (let x = 0; x < canvas.width; x += 2) {
          let bits = 0;

          for (let dy = 0; dy < 4; dy++) {
            for (let dx = 0; dx < 2; dx++) {
              const px = x + dx;
              const py = y + dy;
              if (px >= canvas.width || py >= canvas.height) continue;

              const i = (px + py * canvas.width) * 4;
              const brightness = (data[i] + data[i+1] + data[i+2]) / 3;

              if (brightness < THRESHOLD) {
                const map = [[0,3],[1,4],[2,5],[6,7]];
                bits |= 1 << map[dy][dx];
              }
            }
          }

          asciiArt += String.fromCharCode(0x2800 + bits);
        }
        asciiArt += "\n";
      }

      result.textContent = asciiArt;
    };

    img.src = URL.createObjectURL(file);
  });

  copyBtn.addEventListener("click", () => {
    const text = result.textContent;
    if (!text) return;

    navigator.clipboard.writeText(text).then(() => {
      copyBtn.textContent = "ë³µì‚¬ë¨";
      setTimeout(() => {
        copyBtn.textContent = "ì „ì²´ ë³µì‚¬";
      }, 1200);
    });
  });
</script>

</body>
</html>
